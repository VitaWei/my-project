<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>json.js | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="json1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011">
<meta property="og:type" content="article">
<meta property="og:title" content="json.js">
<meta property="og:url" content="http://yoursite.com/2017/06/25/json-tool/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="json1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011">
<meta property="og:updated_time" content="2017-07-07T13:22:34.289Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="json.js">
<meta name="twitter:description" content="json1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-json-tool" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/json-tool/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      json.js
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    json2.js</div><div class="line">    2012-10-08</div><div class="line"></div><div class="line">    Public Domain.</div><div class="line"></div><div class="line">    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.</div><div class="line"></div><div class="line">    See http://www.JSON.org/js.html</div><div class="line"></div><div class="line"></div><div class="line">    This code should be minified before deployment.</div><div class="line">    See http://javascript.crockford.com/jsmin.html</div><div class="line"></div><div class="line">    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO</div><div class="line">    NOT CONTROL.</div><div class="line"></div><div class="line"></div><div class="line">    This file creates a global JSON object containing two methods: stringify</div><div class="line">    and parse.</div><div class="line"></div><div class="line">        JSON.stringify(value, replacer, space)</div><div class="line">            value       any JavaScript value, usually an object or array.</div><div class="line"></div><div class="line">            replacer    an optional parameter that determines how object</div><div class="line">                        values are stringified <span class="keyword">for</span> objects. It can be a</div><div class="line">                        <span class="keyword">function</span> or an array of strings.</div><div class="line"></div><div class="line">            space       an optional parameter that specifies the indentation</div><div class="line">                        of nested structures. If it is omitted, the text will</div><div class="line">                        be packed without extra whitespace. If it is a number,</div><div class="line">                        it will specify the number of spaces to indent at each</div><div class="line">                        level. If it is a string (such as <span class="string">'\t'</span> or <span class="string">'&amp;nbsp;'</span>),</div><div class="line">                        it contains the characters used to indent at each level.</div><div class="line"></div><div class="line">            This method produces a JSON text from a JavaScript value.</div><div class="line"></div><div class="line">            When an object value is found, <span class="keyword">if</span> the object contains a toJSON</div><div class="line">            method, its toJSON method will be called and the result will be</div><div class="line">            stringified. A toJSON method does not serialize: it returns the</div><div class="line">            value represented by the name/value pair that should be serialized,</div><div class="line">            or undefined <span class="keyword">if</span> nothing should be serialized. The toJSON method</div><div class="line">            will be passed the key associated with the value, and this will be</div><div class="line">            bound to the value</div><div class="line"></div><div class="line">            For example, this would serialize Dates as ISO strings.</div><div class="line"></div><div class="line">                Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                    <span class="keyword">function</span> f(n) &#123;</div><div class="line">                        // Format integers to have at least two digits.</div><div class="line">                        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="built_in">return</span> this.getUTCFullYear()   + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                         f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCSeconds())   + <span class="string">'Z'</span>;</div><div class="line">                &#125;;</div><div class="line"></div><div class="line">            You can provide an optional replacer method. It will be passed the</div><div class="line">            key and value of each member, with this bound to the containing</div><div class="line">            object. The value that is returned from your method will be</div><div class="line">            serialized. If your method returns undefined, <span class="keyword">then</span> the member will</div><div class="line">            be excluded from the serialization.</div><div class="line"></div><div class="line">            If the replacer parameter is an array of strings, <span class="keyword">then</span> it will be</div><div class="line">            used to select the members to be serialized. It filters the results</div><div class="line">            such that only members with keys listed <span class="keyword">in</span> the replacer array are</div><div class="line">            stringified.</div><div class="line"></div><div class="line">            Values that <span class="keyword">do</span> not have JSON representations, such as undefined or</div><div class="line">            <span class="built_in">functions</span>, will not be serialized. Such values <span class="keyword">in</span> objects will be</div><div class="line">            dropped; <span class="keyword">in</span> arrays they will be replaced with null. You can use</div><div class="line">            a replacer <span class="keyword">function</span> to replace those with JSON values.</div><div class="line">            JSON.stringify(undefined) returns undefined.</div><div class="line"></div><div class="line">            The optional space parameter produces a stringification of the</div><div class="line">            value that is filled with line breaks and indentation to make it</div><div class="line">            easier to <span class="built_in">read</span>.</div><div class="line"></div><div class="line">            If the space parameter is a non-empty string, <span class="keyword">then</span> that string will</div><div class="line">            be used <span class="keyword">for</span> indentation. If the space parameter is a number, <span class="keyword">then</span></div><div class="line">            the indentation will be that many spaces.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;]);</div><div class="line">            // text is <span class="string">'["e",&#123;"pluribus":"unum"&#125;]'</span></div><div class="line"></div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;], null, <span class="string">'\t'</span>);</div><div class="line">            // text is <span class="string">'[\n\t"e",\n\t&#123;\n\t\t"pluribus": "unum"\n\t&#125;\n]'</span></div><div class="line"></div><div class="line">            text = JSON.stringify([new Date()], <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                <span class="built_in">return</span> this[key] instanceof Date ?</div><div class="line">                    <span class="string">'Date('</span> + this[key] + <span class="string">')'</span> : value;</div><div class="line">            &#125;);</div><div class="line">            // text is <span class="string">'["Date(---current time---)"]'</span></div><div class="line"></div><div class="line"></div><div class="line">        JSON.parse(text, reviver)</div><div class="line">            This method parses a JSON text to produce an object or array.</div><div class="line">            It can throw a SyntaxError exception.</div><div class="line"></div><div class="line">            The optional reviver parameter is a <span class="keyword">function</span> that can filter and</div><div class="line">            transform the results. It receives each of the keys and values,</div><div class="line">            and its <span class="built_in">return</span> value is used instead of the original value.</div><div class="line">            If it returns what it received, <span class="keyword">then</span> the structure is not modified.</div><div class="line">            If it returns undefined <span class="keyword">then</span> the member is deleted.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            // Parse the text. Values that look like ISO date strings will</div><div class="line">            // be converted to Date objects.</div><div class="line"></div><div class="line">            myData = JSON.parse(text, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var a;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span>) &#123;</div><div class="line">                    a =</div><div class="line">/^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)T(\d&#123;2&#125;):(\d&#123;2&#125;):(\d&#123;2&#125;(?:\.\d*)?)Z$/.<span class="built_in">exec</span>(value);</div><div class="line">                    <span class="keyword">if</span> (a) &#123;</div><div class="line">                        <span class="built_in">return</span> new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],</div><div class="line">                            +a[5], +a[6]));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            myData = JSON.parse(<span class="string">'["Date(09/09/2001)"]'</span>, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var d;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span> &amp;&amp;</div><div class="line">                        value.slice(0, 5) === <span class="string">'Date('</span> &amp;&amp;</div><div class="line">                        value.slice(-1) === <span class="string">')'</span>) &#123;</div><div class="line">                    d = new Date(value.slice(5, -1));</div><div class="line">                    <span class="keyword">if</span> (d) &#123;</div><div class="line">                        <span class="built_in">return</span> d;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line"></div><div class="line">    This is a reference implementation. You are free to copy, modify, or</div><div class="line">    redistribute.</div><div class="line">*/</div><div class="line"></div><div class="line">/*jslint evil: <span class="literal">true</span>, regexp: <span class="literal">true</span> */</div><div class="line"></div><div class="line">/*members <span class="string">""</span>, <span class="string">"\b"</span>, <span class="string">"\t"</span>, <span class="string">"\n"</span>, <span class="string">"\f"</span>, <span class="string">"\r"</span>, <span class="string">"\""</span>, JSON, <span class="string">"\\"</span>, apply,</div><div class="line">    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,</div><div class="line">    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,</div><div class="line">    lastIndex, length, parse, prototype, push, replace, slice, stringify,</div><div class="line">    <span class="built_in">test</span>, toJSON, toString, valueOf</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">// Create a JSON object only <span class="keyword">if</span> one does not already exist. We create the</div><div class="line">// methods <span class="keyword">in</span> a closure to avoid creating global variables.</div><div class="line"></div><div class="line"><span class="keyword">if</span> (typeof JSON !== <span class="string">'object'</span>) &#123;</div><div class="line">    JSON = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="string">'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">function</span> f(n) &#123;</div><div class="line">        // Format integers to have at least two digits.</div><div class="line">        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (typeof Date.prototype.toJSON !== <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">        Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line"></div><div class="line">            <span class="built_in">return</span> isFinite(this.valueOf())</div><div class="line">                ? this.getUTCFullYear()     + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                    f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCSeconds())   + <span class="string">'Z'</span></div><div class="line">                : null;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        String.prototype.toJSON      =</div><div class="line">            Number.prototype.toJSON  =</div><div class="line">            Boolean.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                <span class="built_in">return</span> this.valueOf();</div><div class="line">            &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</div><div class="line">        escapable = /[\\\<span class="string">"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</span></div><div class="line">        gap,</div><div class="line">        indent,</div><div class="line">        meta = &#123;    // table of character substitutions</div><div class="line">            '\b': '\\b',</div><div class="line">            '\t': '\\t',</div><div class="line">            '\n': '\\n',</div><div class="line">            '\f': '\\f',</div><div class="line">            '\r': '\\r',</div><div class="line">            '"<span class="string">' : '</span>\\<span class="string">"',</span></div><div class="line">            '\\': '\\\\'</div><div class="line">        &#125;,</div><div class="line">        rep;</div><div class="line"></div><div class="line"></div><div class="line">    function quote(string) &#123;</div><div class="line"></div><div class="line">// If the string contains no control characters, no quote characters, and no</div><div class="line">// backslash characters, then we can safely slap some quotes around it.</div><div class="line">// Otherwise we must also replace the offending characters with safe escape</div><div class="line">// sequences.</div><div class="line"></div><div class="line">        escapable.lastIndex = 0;</div><div class="line">        return escapable.test(string) ? '"<span class="string">' + string.replace(escapable, function (a) &#123;</span></div><div class="line">            var c = meta[a];</div><div class="line">            return typeof c === 'string<span class="string">'</span></div><div class="line">                ? c</div><div class="line">                : '\\u<span class="string">' + ('</span>0000<span class="string">' + a.charCodeAt(0).toString(16)).slice(-4);</span></div><div class="line">        &#125;) + '<span class="string">"' : '"</span><span class="string">' + string + '</span><span class="string">"';</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    function str(key, holder) &#123;</div><div class="line"></div><div class="line">// Produce a string from holder[key].</div><div class="line"></div><div class="line">        var i,          // The loop counter.</div><div class="line">            k,          // The member key.</div><div class="line">            v,          // The member value.</div><div class="line">            length,</div><div class="line">            mind = gap,</div><div class="line">            partial,</div><div class="line">            value = holder[key];</div><div class="line"></div><div class="line">// If the value has a toJSON method, call it to obtain a replacement value.</div><div class="line"></div><div class="line">        if (value &amp;&amp; typeof value === 'object' &amp;&amp;</div><div class="line">                typeof value.toJSON === 'function') &#123;</div><div class="line">            value = value.toJSON(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// If we were called with a replacer function, then call the replacer to</div><div class="line">// obtain a replacement value.</div><div class="line"></div><div class="line">        if (typeof rep === 'function') &#123;</div><div class="line">            value = rep.call(holder, key, value);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// What happens next depends on the value's type.</div><div class="line"></div><div class="line">        switch (typeof value) &#123;</div><div class="line">        case 'string':</div><div class="line">            return quote(value);</div><div class="line"></div><div class="line">        case 'number':</div><div class="line"></div><div class="line">// JSON numbers must be finite. Encode non-finite numbers as null.</div><div class="line"></div><div class="line">            return isFinite(value) ? String(value) : 'null';</div><div class="line"></div><div class="line">        case 'boolean':</div><div class="line">        case 'null':</div><div class="line"></div><div class="line">// If the value is a boolean or null, convert it to a string. Note:</div><div class="line">// typeof null does not produce 'null'. The case is included here in</div><div class="line">// the remote chance that this gets fixed someday.</div><div class="line"></div><div class="line">            return String(value);</div><div class="line"></div><div class="line">// If the type is 'object', we might be dealing with an object or an array or</div><div class="line">// null.</div><div class="line"></div><div class="line">        case 'object':</div><div class="line"></div><div class="line">// Due to a specification blunder in ECMAScript, typeof null is 'object',</div><div class="line">// so watch out for that case.</div><div class="line"></div><div class="line">            if (!value) &#123;</div><div class="line">                return 'null';</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make an array to hold the partial results of stringifying this object value.</div><div class="line"></div><div class="line">            gap += indent;</div><div class="line">            partial = [];</div><div class="line"></div><div class="line">// Is the value an array?</div><div class="line"></div><div class="line">            if (Object.prototype.toString.apply(value) === '[object Array]') &#123;</div><div class="line"></div><div class="line">// The value is an array. Stringify every element. Use null as a placeholder</div><div class="line">// for non-JSON values.</div><div class="line"></div><div class="line">                length = value.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    partial[i] = str(i, value) || 'null';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// Join all of the elements together, separated with commas, and wrap them in</div><div class="line">// brackets.</div><div class="line"></div><div class="line">                v = partial.length === 0</div><div class="line">                    ? '[]'</div><div class="line">                    : gap</div><div class="line">                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'</div><div class="line">                    : '[' + partial.join(',') + ']';</div><div class="line">                gap = mind;</div><div class="line">                return v;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the replacer is an array, use it to select the members to be stringified.</div><div class="line"></div><div class="line">            if (rep &amp;&amp; typeof rep === 'object') &#123;</div><div class="line">                length = rep.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    if (typeof rep[i] === 'string') &#123;</div><div class="line">                        k = rep[i];</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">// Otherwise, iterate through all of the keys in the object.</div><div class="line"></div><div class="line">                for (k in value) &#123;</div><div class="line">                    if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Join all of the member texts together, separated with commas,</div><div class="line">// and wrap them in braces.</div><div class="line"></div><div class="line">            v = partial.length === 0</div><div class="line">                ? '&#123;&#125;'</div><div class="line">                : gap</div><div class="line">                ? '&#123;\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '&#125;'</div><div class="line">                : '&#123;' + partial.join(',') + '&#125;';</div><div class="line">            gap = mind;</div><div class="line">            return v;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// If the JSON object does not yet have a stringify method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.stringify !== 'function') &#123;</div><div class="line">        JSON.stringify = function (value, replacer, space) &#123;</div><div class="line"></div><div class="line">// The stringify method takes a value and an optional replacer, and an optional</div><div class="line">// space parameter, and returns a JSON text. The replacer can be a function</div><div class="line">// that can replace values, or an array of strings that will select the keys.</div><div class="line">// A default replacer method can be provided. Use of the space parameter can</div><div class="line">// produce text that is more easily readable.</div><div class="line"></div><div class="line">            var i;</div><div class="line">            gap = '';</div><div class="line">            indent = '';</div><div class="line"></div><div class="line">// If the space parameter is a number, make an indent string containing that</div><div class="line">// many spaces.</div><div class="line"></div><div class="line">            if (typeof space === 'number') &#123;</div><div class="line">                for (i = 0; i &lt; space; i += 1) &#123;</div><div class="line">                    indent += ' ';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// If the space parameter is a string, it will be used as the indent string.</div><div class="line"></div><div class="line">            &#125; else if (typeof space === 'string') &#123;</div><div class="line">                indent = space;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If there is a replacer, it must be a function or an array.</div><div class="line">// Otherwise, throw an error.</div><div class="line"></div><div class="line">            rep = replacer;</div><div class="line">            if (replacer &amp;&amp; typeof replacer !== 'function' &amp;&amp;</div><div class="line">                    (typeof replacer !== 'object' ||</div><div class="line">                    typeof replacer.length !== 'number')) &#123;</div><div class="line">                throw new Error('JSON.stringify');</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make a fake root object containing our value under the key of ''.</div><div class="line">// Return the result of stringifying the value.</div><div class="line"></div><div class="line">            return str('', &#123;'': value&#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">// If the JSON object does not yet have a parse method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.parse !== 'function') &#123;</div><div class="line">        JSON.parse = function (text, reviver) &#123;</div><div class="line"></div><div class="line">// The parse method takes a text and an optional reviver function, and returns</div><div class="line">// a JavaScript value if the text is a valid JSON text.</div><div class="line"></div><div class="line">            var j;</div><div class="line"></div><div class="line">            function walk(holder, key) &#123;</div><div class="line"></div><div class="line">// The walk method is used to recursively walk the resulting structure so</div><div class="line">// that modifications can be made.</div><div class="line"></div><div class="line">                var k, v, value = holder[key];</div><div class="line">                if (value &amp;&amp; typeof value === 'object') &#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                delete value[k];</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return reviver.call(holder, key, value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">// Parsing happens in four stages. In the first stage, we replace certain</div><div class="line">// Unicode characters with escape sequences. JavaScript handles many characters</div><div class="line">// incorrectly, either silently deleting them, or treating them as line endings.</div><div class="line"></div><div class="line">            text = String(text);</div><div class="line">            cx.lastIndex = 0;</div><div class="line">            if (cx.test(text)) &#123;</div><div class="line">                text = text.replace(cx, function (a) &#123;</div><div class="line">                    return '\\u' +</div><div class="line">                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// In the second stage, we run the text against regular expressions that look</div><div class="line">// for non-JSON patterns. We are especially concerned with '()' and 'new'</div><div class="line">// because they can cause invocation, and '=' because it can cause mutation.</div><div class="line">// But just to be safe, we want to reject all unexpected forms.</div><div class="line"></div><div class="line">// We split the second stage into 4 regexp operations in order to work around</div><div class="line">// crippling inefficiencies in IE's and Safari's regexp engines. First we</div><div class="line">// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we</div><div class="line">// replace all simple value tokens with ']' characters. Third, we delete all</div><div class="line">// open brackets that follow a colon or comma or that begin the text. Finally,</div><div class="line">// we look to see that the remaining characters are only whitespace or ']' or</div><div class="line">// ',' or ':' or '&#123;' or '&#125;'. If that is so, then the text is safe for eval.</div><div class="line"></div><div class="line">            if (/^[\],:&#123;&#125;\s]*$/</div><div class="line">                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, <span class="string">'@'</span>)</div><div class="line">                        .replace(/<span class="string">"[^"</span>\\\n\r]*<span class="string">"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')</span></div><div class="line">                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) &#123;</div><div class="line"></div><div class="line">// In the third stage we use the eval function to compile the text into a</div><div class="line">// JavaScript structure. The '&#123;' operator is subject to a syntactic ambiguity</div><div class="line">// in JavaScript: it can begin a block or an object literal. We wrap the text</div><div class="line">// in parens to eliminate the ambiguity.</div><div class="line"></div><div class="line">                j = eval('(' + text + ')');</div><div class="line"></div><div class="line">// In the optional fourth stage, we recursively walk the new structure, passing</div><div class="line">// each name/value pair to a reviver function for possible transformation.</div><div class="line"></div><div class="line">                return typeof reviver === 'function'</div><div class="line">                    ? walk(&#123;'': j&#125;, '')</div><div class="line">                    : j;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the text is not JSON parseable, then a SyntaxError is thrown.</div><div class="line"></div><div class="line">            throw new SyntaxError('JSON.parse');</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/json-tool/" data-id="cj4tw8rxk0006swr36xugzrjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/25/json-js/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          json.js
        
      </div>
    </a>
  
  
    <a href="/2017/06/25/json2-js/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">json.js 工具</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/07/first/">first</a>
          </li>
        
          <li>
            <a href="/2017/07/07/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/06/25/AjaxXHR-js/">ajax Xhr</a>
          </li>
        
          <li>
            <a href="/2017/06/25/again-test/">again test</a>
          </li>
        
          <li>
            <a href="/2017/06/25/json-js/">json.js</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>